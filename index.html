<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🔥 خصوصی ڈیٹنگ تک رسائی 🔥</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; background: black; color: white; }
        .container { max-width: 400px; margin: 50px auto; padding: 20px; background: rgba(0, 0, 0, 0.8); border-radius: 10px; }
        .cta-button { display: inline-block; padding: 15px 20px; background: red; color: white; text-decoration: none; font-size: 20px; font-weight: bold; border-radius: 5px; margin-top: 20px; cursor: pointer; }
        input { padding: 10px; width: 90%; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔥 صرف 18+ کے لیے خصوصی رسائی 🔥</h1>
        <p>براہ کرم اپنا ای میل درج کریں تاکہ آپ براؤزنگ جاری رکھ سکیں:</p>
        <input type="email" id="email" placeholder="اپنا ای میل درج کریں" required>
        <button class="cta-button" onclick="submitEmail()">رسائی حاصل کریں</button>
    </div>

    <script>
        async function submitEmail() {
            const email = document.getElementById("email").value;

            // ای میل کا خالی ہونا چیک کریں
            if (!email) {
                alert("جاری رکھنے کے لیے آپ کو ایک درست ای میل درج کرنا ضروری ہے!");
                return;  // اگر ای میل نہیں ہے تو عمل نہ کریں
            }

            // ای میل کے درست فارمیٹ کی تصدیق کریں
            const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
            if (!emailRegex.test(email)) {
                alert("براہ کرم ایک درست ای میل ایڈریس درج کریں!");
                return;  // اگر ای میل کا فارمیٹ درست نہ ہو تو عمل نہ کریں
            }

            try {
                // ای میل کو سرور پر بھیجیں
                const response = await fetch("https://ivewhjsyfwmxxyfmoakw.supabase.co/rest/v1/emails", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "apikey": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml2ZXdoanN5ZndteHh5Zm1vYWt3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg4MzczNjksImV4cCI6MjA1NDQxMzM2OX0.sXwkKkGlNWvH40SuDkyj2WegeghAds6-Kp0XHJWv_0Y", 
                        "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml2ZXdoanN5ZndteHh5Zm1vYWt3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg4MzczNjksImV4cCI6MjA1NDQxMzM2OX0.sXwkKkGlNWvH40SuDkyj2WegeghAds6-Kp0XHJWv_0Y"
                    },
                    body: JSON.stringify({ email })
                });

                const responseText = await response.text();  // جوابی پیغام کو ٹیکسٹ کی صورت میں پڑھیں

                if (!response.ok) {
                    console.error("جواب میں غلطی:", responseText);  // غلطی کو کنسول میں دکھائیں

                    if (responseText.includes("duplicate key value")) {
                        // اگر ای میل پہلے سے موجود ہو تو ہم بغیر کسی غلطی کے صرف ری ڈائریکٹ کر دیتے ہیں
                        window.location.href = "https://t.slext2.com/341879/7272?bo=2753,2754,2755,2756&popUnder=true&aff_sub5=SF_006OG000004lmDN";
                    } else {
                        // اگر کوئی اور غلطی ہو تو ہم بغیر کسی غلطی کے ری ڈائریکٹ کر دیتے ہیں
                        window.location.href = "https://t.slext2.com/341879/7272?bo=2753,2754,2755,2756&popUnder=true&aff_sub5=SF_006OG000004lmDN";
                    }
                    return;
                }

                // اگر جواب خالی ہو، تو ہم اسے JSON کے طور پر نہ پارس کر کے صرف ری ڈائریکٹ کر دیں گے
                if (!responseText.trim()) {
                    window.location.href = "https://t.slext2.com/341879/7272?bo=2753,2754,2755,2756&popUnder=true&aff_sub5=SF_006OG000004lmDN";
                    return;
                }

                // اگر جواب کامیاب ہو تو صارف کو پیشکش پر ری ڈائریکٹ کریں
                window.location.href = "https://t.slext2.com/341879/7272?bo=2753,2754,2755,2756&popUnder=true&aff_sub5=SF_006OG000004lmDN";

            } catch (error) {
                console.error("ای میل بھیجنے میں خرابی:", error);  // درخواست کی خرابی کو کنسول میں دکھائیں
                window.location.href = "https://t.slext2.com/341879/7272?bo=2753,2754,2755,2756&popUnder=true&aff_sub5=SF_006OG000004lmDN"; // ہم ہر صورت ری ڈائریکٹ کریں گے
            }
        }
    </script>
</body>
</html>
